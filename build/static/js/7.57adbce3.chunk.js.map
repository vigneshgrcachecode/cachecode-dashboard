{"version":3,"sources":["app/services/apiServices.js","app/tables/ComponentToPrint.js","assets/images/icons/warning.png","app/shared/Warning.js","app/tables/BasicTable.js"],"names":["Base_URL","getAllItems","axios","get","result","addItems","body","post","getAllBillsByPage","params","ComponentToPrint","React","forwardRef","props","ref","className","printData","customerName","mobileNo","cafeOrderItemDetailEntityList","map","item","index","key","itemName","totalAmount","quantity","total","module","exports","Warning","message","src","require","alt","i","BasicTable","componentRef","useRef","useState","data","setData","navigate","useNavigate","setUserData","pageNo","setPageNo","showWarning","setShowWarning","warningMsg","setWarningMsg","printBill","useReactToPrint","content","current","navigateInvoice","type","getAllInvoice","shopNumber","JSON","parse","localStorage","getItem","id","response","cafeOrderResponses","console","log","useEffect","user","setTimeout","style","marginTop","length","res","display","email","Date","createdTimeStamp","getDate","getMonth","getFullYear","onClick","disabled"],"mappings":"4OACIA,E,8BAAJ,46MAIEA,EAAW,2BAMN,IAAMC,EAAW,uCAAG,oGACJC,IAAMC,IAAI,GAAD,OAAIH,EAAQ,sBAAqB,KAAD,EAAlD,OAANI,EAAM,yBACLA,GAAM,2CACd,kBAHuB,mCAKXC,EAAQ,uCAAG,WAAOC,GAAI,uFACZJ,IAAMK,KAAK,GAAD,OAAIP,EAAQ,kBAAkBM,GAAM,KAAD,EAAtD,OAANF,EAAM,yBACLA,GAAM,2CACd,gBAHoB,sCAKRI,EAAiB,uCAAG,WAAOC,GAAM,uFACvBP,IAAMC,IAAI,GAAD,OAAIH,EAAQ,0BAA0B,CAClES,OAAQA,IACP,KAAD,EAFU,OAANL,EAAM,yBAGLA,GAAM,2CACd,gBAL6B,uC,iCCrB9B,sDAGaM,GAHb,OAGgCC,IAAMC,YAAW,SAACC,EAAOC,GACvD,OACE,yBAAKA,IAAKA,EAAKC,UAAU,cACvB,yCACA,4BACE,qCACCF,EAAMG,UAAUC,cAEnB,4BACE,uCACCJ,EAAMG,UAAUE,UAGnB,0DACA,+BACE,+BACE,4BACE,oCACA,mCACA,mCACA,qCAGJ,+BACGL,EAAMG,UAAUG,8BAA8BC,KAAI,SAACC,EAAMC,GACxD,OACE,wBAAIC,IAAKD,GACP,4BAAKD,EAAKG,UACV,4BAAKH,EAAKI,YAAcJ,EAAKK,UAC7B,4BAAKL,EAAKK,UACV,4BAAKL,EAAKI,mBAMpB,6BACA,4BACE,sCACCZ,EAAMG,UAAUW,a,sFC1CzBC,EAAOC,QAAU,IAA0B,qC,oGCG9BC,G,cAAU,SAAH,GAAqB,IAAfC,EAAO,EAAPA,QACxB,OACE,yBAAKhB,UAAU,uBACb,yBAAKA,UAAU,gBACb,yBAAKA,UAAU,gBACb,yBAAKiB,IAAKC,EAAQ,KAA0CC,IAAI,WAGlE,2BAAIH,O,+BCVZ,omGAAAI,GAAA,wBAAAA,EAAA,sBAAAA,GAAA,iBAAAA,GAAA,ssDAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,4bAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,yhBAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,qGAAAA,EAAA,yBAAAA,GAAA,IAAAA,EAAA,uBAAAA,GAAA,sQA0LeC,UAlLI,WACjB,IAAMC,EAAeC,mBACrB,EAAwBC,mBAAS,IAAG,mBAA7BC,EAAI,KAAEC,EAAO,KACdC,EAAWC,cACjB,EAAgCJ,qBAAU,mBAAzBK,GAAF,KAAa,MAC5B,EAA4BL,mBAAS,GAAE,mBAAhCM,EAAM,KAAEC,EAAS,KACxB,EAAsCP,oBAAS,GAAM,mBAA9CQ,EAAW,KAAEC,EAAc,KAClC,EAAoCT,qBAAU,mBAAvCU,EAAU,KAAEC,EAAa,KAmB1BC,EAAYC,0BAAgB,CAChCC,QAAS,kBAAMhB,EAAaiB,WAGxBC,EAAkB,SAACC,GAErBV,EADW,SAATU,EACQX,EAAS,EAETA,EAAS,IAIjBY,EAAa,uCAAG,0FAInB,OAHKhD,EAAS,CACbiD,WAAYC,KAAKC,MAAMC,aAAaC,QAAQ,uBAAuBC,GACnElB,OAAQA,GACR,EAAD,gBAEwBrC,YAAkBC,GAAQ,KAAD,GAEnC,QAFPuD,EAAQ,cAED,IAARA,GAAc,QAAN,EAARA,EAAUxB,YAAI,WAAN,EAAR,EAAgByB,oBAKnBxB,EAAgB,OAARuB,QAAQ,IAARA,GAAc,QAAN,EAARA,EAAUxB,YAAI,WAAN,EAAR,EAAgByB,qBAJxBnB,EAAU,GACVE,GAAe,GACfE,EAAc,sBAGf,gDAEDgB,QAAQC,IAAI,EAAD,IAAQ,yDAEtB,kBAlBkB,mCAuCnB,OAnBAC,qBAAU,WACR,IAAIC,EAAOV,KAAKC,MAAMC,aAAaC,QAAQ,uBAC3ClB,EAAYyB,GAEC,OAATA,EACF3B,EAAS,UAETe,MAED,CAACZ,IAEJuB,qBAAU,WACJrB,GACFuB,YAAW,WACTtB,GAAe,GACfE,MACC,CAAC,QAEL,CAACH,IAEF,yBAAKwB,MAAO,CAAEC,UAAW,SACvB,yBAAKzD,UAAU,eACb,wBAAIA,UAAU,cAAY,wBAG5B,yBAAKA,UAAU,OACb,yBAAKA,UAAU,sCACb,yBAAKA,UAAU,QACb,yBAAKA,UAAU,aACb,wBAAIA,UAAU,cAAY,YAC1B,yBAAKA,UAAU,qCACb,2BAAOA,UAAU,qCACf,+BACE,4BACE,oCACA,yCACA,wCACA,yCACA,2CACA,qCACA,uCAGJ,gCACO,OAAJyB,QAAI,IAAJA,OAAI,EAAJA,EAAMiC,QAAS,IACV,OAAJjC,QAAI,IAAJA,OAAI,EAAJA,EAAMpB,KAAI,SAACsD,EAAKpD,GACd,OACE,kBAAC,WAAQ,CAACC,IAAKD,EAAQ,aACrB,yBAAKiD,MAAO,CAAEI,QAAS,SACrB,kBAACjE,EAAA,EAAgB,CAACI,IAAKuB,EAAcrB,UAAW0D,KAElD,4BACE,4BAAKA,EAAIzD,cACT,4BAAKyD,EAAIxD,UACT,4BAAKwD,EAAIE,OACT,4BAAK,IAAIC,KAAKH,EAAII,kBAAkBC,UAAY,IAAM,IAAIF,KAAKH,EAAII,kBAAkBE,WAAa,IAAM,IAAIH,KAAKH,EAAII,kBAAkBG,eACvI,4BAAKP,EAAIvD,8BAA8BsD,QACvC,4BAAKC,EAAI/C,OAKT,wBAAIuD,QAAS/B,EAAWpC,UAAU,aAChC,mDAwClB,yBAAKA,UAAU,gBACb,4BAAQoE,SAAqB,IAAXtC,EAAcqC,QAAS,kBAAM3B,EAAgB,UAAQ,YAGvE,4BAAQ4B,SAA2B,KAAb,OAAJ3C,QAAI,IAAJA,OAAI,EAAJA,EAAMiC,SAAiC,QAAb,OAAJjC,QAAI,IAAJA,OAAI,EAAJA,EAAMiC,QAAiBS,QAAS,kBAAM3B,EAAgB,UAAQ,aAQ/GR,GAAe,kBAAC,EAAO,CAAChB,QAASkB","file":"static/js/7.57adbce3.chunk.js","sourcesContent":["import axios from \"axios\";\nlet Base_URL;\n\nif (process.env.NODE_ENV === \"production\") {\n  // Base_URL = process.env.REACT_APP_API_URL;\n  Base_URL = \"https://app.cachecode.in\";\n} else {\n  // Base_URL = process.env.REACT_APP_API_URL;\n  Base_URL = \"https://app.cachecode.in\";\n}\n\nexport const getAllItems = async () => {\n  const result = await axios.get(`${Base_URL}/cafe/getAllItems`);\n  return result;\n};\n\nexport const addItems = async (body) => {\n  const result = await axios.post(`${Base_URL}/cafe/addItems`, body);\n  return result;\n};\n\nexport const getAllBillsByPage = async (params) => {\n  const result = await axios.get(`${Base_URL}/cafe/getAllBillByPage`, {\n    params: params,\n  });\n  return result;\n};\n","import React, { Fragment } from \"react\";\nimport \"./ComponentToPrint.scss\";\n\nexport const ComponentToPrint = React.forwardRef((props, ref) => {\n  return (\n    <div ref={ref} className=\"print_cntr\">\n      <h4>CacheCode</h4>\n      <h4>\n        <b>Name: </b>\n        {props.printData.customerName}\n      </h4>\n      <h4>\n        <b>Mobile: </b>\n        {props.printData.mobileNo}\n      </h4>\n\n      <h6>Tax Invoice/Bill of Supply</h6>\n      <table>\n        <thead>\n          <tr>\n            <th>Item</th>\n            <th>MRP</th>\n            <th>QTY</th>\n            <th>Amt</th>\n          </tr>\n        </thead>\n        <tbody>\n          {props.printData.cafeOrderItemDetailEntityList.map((item, index) => {\n            return (\n              <tr key={index}>\n                <td>{item.itemName}</td>\n                <td>{item.totalAmount / item.quantity}</td>\n                <td>{item.quantity}</td>\n                <td>{item.totalAmount}</td>\n              </tr>\n            );\n          })}\n        </tbody>\n      </table>\n      <hr />\n      <h4>\n        <b>Total: </b>\n        {props.printData.total}\n      </h4>\n    </div>\n  );\n});\n","module.exports = __webpack_public_path__ + \"static/media/warning.8148959f.png\";","import React from \"react\";\nimport \"./Warning.scss\";\n\nexport const Warning = ({ message }) => {\n  return (\n    <div className=\"warning_parent_cntr\">\n      <div className=\"warning_cntr\">\n        <div className=\"warning_icon\">\n          <img src={require(\"../../assets/images/icons/warning.png\")} alt=\"check\" />\n        </div>\n\n        <p>{message}</p>\n      </div>\n    </div>\n  );\n};\n","import React, { Fragment, useEffect, useRef, useState } from \"react\";\nimport axios from \"axios\";\nimport { getAllBillsByPage } from \"../services/apiServices\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./Invoices.scss\";\nimport { Warning } from \"../shared/Warning\";\nimport { useReactToPrint } from \"react-to-print\";\nimport { ComponentToPrint } from \"./ComponentToPrint\";\n\nconst BasicTable = () => {\n  const componentRef = useRef();\n  const [data, setData] = useState([]);\n  const navigate = useNavigate();\n  const [userData, setUserData] = useState();\n  const [pageNo, setPageNo] = useState(0);\n  const [showWarning, setShowWarning] = useState(false);\n  const [warningMsg, setWarningMsg] = useState();\n  // const getAllData = () => {\n  //   axios.get(`http://localhost:8080/bms/getAllBill`, {}).then((res) => {\n  //     setData(res.data);\n  //     console.log(res);\n  //   });\n  // };\n\n  // const showItems = (index) => {\n  //   let list = [...data];\n\n  //   if (\"showItems\" in list[index]) {\n  //     list[index].showItems = !list[index].showItems;\n  //   } else {\n  //     list[index].showItems = true;\n  //   }\n  //   setData(list);\n  // };\n\n  const printBill = useReactToPrint({\n    content: () => componentRef.current,\n  });\n\n  const navigateInvoice = (type) => {\n    if (type === \"next\") {\n      setPageNo(pageNo + 1);\n    } else {\n      setPageNo(pageNo - 1);\n    }\n  };\n\n  const getAllInvoice = async () => {\n    const params = {\n      shopNumber: JSON.parse(localStorage.getItem(\"cacheCode_UserData\")).id,\n      pageNo: pageNo,\n    };\n    try {\n      const response = await getAllBillsByPage(params);\n\n      if (!response?.data?.cafeOrderResponses) {\n        setPageNo(0);\n        setShowWarning(true);\n        setWarningMsg(\"No more invoices.\");\n      } else {\n        setData(response?.data?.cafeOrderResponses);\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    let user = JSON.parse(localStorage.getItem(\"cacheCode_UserData\"));\n    setUserData(user);\n\n    if (user === null) {\n      navigate(\"/login\");\n    } else {\n      getAllInvoice();\n    }\n  }, [pageNo]);\n\n  useEffect(() => {\n    if (showWarning) {\n      setTimeout(() => {\n        setShowWarning(false);\n        setWarningMsg();\n      }, [3000]);\n    }\n  }, [showWarning]);\n  return (\n    <div style={{ marginTop: \"12vh\" }}>\n      <div className=\"page-header\">\n        <h3 className=\"page-title\"> CUSTOMER INVOICES </h3>\n      </div>\n\n      <div className=\"row\">\n        <div className=\"col-lg-12 grid-margin stretch-card\">\n          <div className=\"card\">\n            <div className=\"card-body\">\n              <h4 className=\"card-title\">INVOICES</h4>\n              <div className=\"table-responsive invoice-tbl-cntr\">\n                <table className=\"table table-striped invoice-table\">\n                  <thead>\n                    <tr>\n                      <th>Name</th>\n                      <th>Mobile No</th>\n                      <th>Email-Id</th>\n                      <th>Bill Date</th>\n                      <th>Total Items</th>\n                      <th>Total</th>\n                      <th>Print</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    {data?.length > 0 &&\n                      data?.map((res, index) => {\n                        return (\n                          <Fragment key={index + \"_invoices\"}>\n                            <div style={{ display: \"none\" }}>\n                              <ComponentToPrint ref={componentRef} printData={res} />\n                            </div>\n                            <tr>\n                              <td>{res.customerName}</td>\n                              <td>{res.mobileNo}</td>\n                              <td>{res.email}</td>\n                              <td>{new Date(res.createdTimeStamp).getDate() + \"/\" + new Date(res.createdTimeStamp).getMonth() + \"/\" + new Date(res.createdTimeStamp).getFullYear()}</td>\n                              <td>{res.cafeOrderItemDetailEntityList.length}</td>\n                              <td>{res.total}</td>\n\n                              {/* <td style={{ cursor: \"pointer\", fontSize: \"18px\" }} onClick={() => showItems(index)}>\n                                {res.showItems ? <i class=\"icofont-line-block-up\"></i> : <i class=\"icofont-line-block-down\"></i>}{\" \"}\n                              </td> */}\n                              <td onClick={printBill} className=\"print-btn\">\n                                <button>Print</button>\n                              </td>\n                            </tr>\n                            {/* {res.showItems && (\n                              <tr>\n                                <td colSpan={6}>\n                                  <table style={{ width: \"100%\" }}>\n                                    <thead>\n                                      <tr>\n                                        <th>S.No</th>\n                                        <th>Item Name</th>\n                                        <th>Quantity</th>\n                                        <th>Price</th>\n                                        <th>Total Price</th>\n                                      </tr>\n                                    </thead>\n                                    <tbody>\n                                      {res?.cafeItemRequests?.map((item) => {\n                                        return (\n                                          <tr>\n                                            <td>{item.itemsNo}</td>\n                                            <td>{item.itemName}</td>\n                                            <td>{item.quantity}</td>\n                                            <td>{item.amount}</td>\n                                            <td>{item.totalAmount}</td>\n                                          </tr>\n                                        );\n                                      })}\n                                    </tbody>\n                                  </table>\n                                </td>\n                              </tr>\n                            )} */}\n                          </Fragment>\n                        );\n                      })}\n                  </tbody>\n                </table>\n              </div>\n\n              <div className=\"invoices-nav\">\n                <button disabled={pageNo === 0} onClick={() => navigateInvoice(\"prev\")}>\n                  Previous\n                </button>\n                <button disabled={data?.length === 0 || data?.length === null} onClick={() => navigateInvoice(\"next\")}>\n                  Next\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      {showWarning && <Warning message={warningMsg} />}\n    </div>\n  );\n};\n\nexport default BasicTable;\n"],"sourceRoot":""}